{"ast":null,"code":"import _regeneratorRuntime from \"/home/rserrat/Projetos/github-search/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/rserrat/Projetos/github-search/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/rserrat/Projetos/github-search/client/src/pages/Home/Home.js\";\nimport React, { useEffect, useContext } from 'react';\nimport { urlGithub } from '../../config';\nimport { StoreContext, START_RESULTUSERS, SUCCESS_RESULTUSERS, ERROR_RESULTUSERS } from '../../store';\nimport Container from '../../components/Container/Container';\nimport List from '../../components/List/List';\nimport User from '../../components/User/User';\nimport Loading from '../../components/Loading/Loading';\nimport Empty from '../../components/Empty/Empty';\n\nvar Home = function Home(_ref) {\n  var location = _ref.location;\n\n  var _useContext = useContext(StoreContext),\n      _useContext$state$use = _useContext.state.users,\n      data = _useContext$state$use.data,\n      currentSearch = _useContext$state$use.currentSearch,\n      loading = _useContext$state$use.loading,\n      dispatch = _useContext.dispatch;\n\n  var fetchData =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, _ref3, items;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(!location.search || data && data.length > 0 && location.search === currentSearch)) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              dispatch({\n                type: START_RESULTUSERS,\n                query: location.search\n              });\n              _context.next = 5;\n              return fetch(\"/api/search/users\".concat(location.search));\n\n            case 5:\n              response = _context.sent;\n\n              if (!response) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 9;\n              return response.json();\n\n            case 9:\n              _ref3 = _context.sent;\n              items = _ref3.items;\n              dispatch({\n                type: SUCCESS_RESULTUSERS,\n                data: items\n              });\n              _context.next = 15;\n              break;\n\n            case 14:\n              dispatch({\n                type: ERROR_RESULTUSERS,\n                error: 'Erro de servidor'\n              });\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getTermSearch = function getTermSearch() {\n    return location.search ? location.search.split(\"?q=\")[1] : null;\n  };\n\n  var renderContent = function renderContent() {\n    if (loading) {\n      return React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      });\n    } else if (data && data.length <= 0) {\n      return React.createElement(Empty, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      });\n    } else if (data && data.length > 0) {\n      return React.createElement(List, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, data.map(function (item) {\n        return React.createElement(User, {\n          key: item.login,\n          login: item.login,\n          avatarUrl: item.avatar_url,\n          id: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        });\n      }));\n    }\n\n    return null;\n  };\n\n  useEffect(function () {\n    fetchData();\n  }, [location.search]);\n  return React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, !!getTermSearch() && React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Mostrando resultado de busca para \", React.createElement(\"b\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"\\\"\", getTermSearch(), \"\\\"\")), renderContent());\n};\n\nexport default Home;","map":{"version":3,"sources":["/home/rserrat/Projetos/github-search/client/src/pages/Home/Home.js"],"names":["React","useEffect","useContext","urlGithub","StoreContext","START_RESULTUSERS","SUCCESS_RESULTUSERS","ERROR_RESULTUSERS","Container","List","User","Loading","Empty","Home","location","state","users","data","currentSearch","loading","dispatch","fetchData","search","length","type","query","fetch","response","json","items","error","getTermSearch","split","renderContent","map","item","login","avatar_url","id"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext } from 'react';\nimport { urlGithub } from '../../config';\nimport { \n  StoreContext,\n  START_RESULTUSERS, \n  SUCCESS_RESULTUSERS,\n  ERROR_RESULTUSERS \n} from '../../store';\nimport Container from '../../components/Container/Container';\nimport List from '../../components/List/List';\nimport User from '../../components/User/User';\nimport Loading from '../../components/Loading/Loading';\nimport Empty from '../../components/Empty/Empty';\n\nconst Home = ({ location }) => {\n  const { state: { users: { data, currentSearch, loading } }, dispatch } = useContext(StoreContext);\n\n  const fetchData = async () => {\n    if (\n      !location.search || \n      (data && data.length > 0 && location.search === currentSearch)\n    ) return;\n\n    dispatch({ type: START_RESULTUSERS, query: location.search });\n    const response = await fetch(`/api/search/users${location.search}`);\n    \n    if (response) {\n      const { items } = await response.json();\n      dispatch({ type: SUCCESS_RESULTUSERS, data: items });\n    } else {\n      dispatch({ type: ERROR_RESULTUSERS, error: 'Erro de servidor' });\n    }\n  }\n\n  const getTermSearch = () => location.search ? location.search.split(\"?q=\")[1] : null;\n\n  const renderContent = () => {\n    if (loading) {\n      return <Loading />\n    } else if (data && data.length <= 0) {\n      return <Empty />\n    } else if (data && data.length > 0) {\n      return <List>\n        {data.map(item => (\n          <User key={item.login} login={item.login} avatarUrl={item.avatar_url} id={item.id} />\n        ))}\n      </List>\n    }\n    return null;\n  }\n\n  useEffect(() => {\n    fetchData();\n  }, [location.search]);\n\n  return (\n    <Container>\n      {!!getTermSearch() && <h4>Mostrando resultado de busca para <b>\"{getTermSearch()}\"</b></h4>}\n      {renderContent()}\n    </Container>\n  )\n}\n\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}